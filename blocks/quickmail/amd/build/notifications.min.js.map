{"version":3,"file":"notifications.min.js","names":["define","$","notification","callNoti","data","hasOwnProperty","console","log","type","addNotification","storeMsg","sessionStorage","setItem","success","msg","showMsg","getItem","message","removeItem"],"sources":["../src/notifications.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package    block_quickmail\n * @copyright  2008 onwards Louisiana State University\n * @copyright  2008 onwards Chad Mazilly, Robert Russo, Jason Peak, Dave Elliott, Adam Zapletal, Philip Cali, David Lowe\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/notification'], function($, notification) {\n    'use strict';\n\n    return {\n\n        /**\n         * A simple way to call the Moodle core notification system.\n         * Type can be either: success, warning, info, error\n         *  Example:\n         *  noti.callNoti({\n         *      message: \"This is a success test\",\n         *      type: \"success\"\n         *  });\n         * @param {obj} data A simple object with the 'message' and 'type' of notification.\n         * @return void\n         */\n        callNoti: function(data) {\n            if (!data.hasOwnProperty('message')) {\n                console.log(\"ERROR -> Notification was called but with no message, aborting.\");\n            }\n            if (!data.hasOwnProperty('type')) {\n                // default to info\n                data.type = \"info\";\n            }\n            notification.addNotification(data);\n        },\n        /**\n         * Store the reponse object to showcase a message after reload.\n         * @param {obj} data Server Response {'success', 'data', 'msg'}\n         *\n         * @return void\n         */\n        storeMsg: function(data) {\n            // Save data to sessionStorage\n            if (data.hasOwnProperty('success')) {\n                sessionStorage.setItem('sent_delete_success', data.success);\n                sessionStorage.setItem('sent_delete_msg', data.msg);\n            } else {\n                console.log(\"NOTI -> Error: There was an error with the data from the server, please contact Moodle Dev Team.\");\n            }\n        },\n\n        /**\n         *  If a message is stored then show the notification and remove it.\n         * @return void\n         */\n        showMsg: function() {\n            // Save data to sessionStorage\n            if (sessionStorage.getItem('sent_delete_msg')) {\n                this.callNoti({\n                    message: sessionStorage.getItem('sent_delete_msg'),\n                    type: sessionStorage.getItem('sent_delete_success')\n                });\n                // Remove saved data from sessionStorage\n                sessionStorage.removeItem('sent_delete_msg');\n                sessionStorage.removeItem('sent_delete_success');\n            }\n        }\n    };\n});"],"mappings":"AAsBAA,OAAM,iCAAC,CAAC,QAAQ,CAAE,mBAAmB,CAAC,CAAE,SAASC,CAAC,CAAEC,CAAY,CAAE,CAC9D,YAAY,CAEZ,MAAO,CAaHC,QAAQ,CAAE,SAAAA,SAASC,CAAI,CAAE,CACrB,GAAI,CAACA,CAAI,CAACC,cAAc,CAAC,SAAS,CAAC,CAAE,CACjCC,OAAO,CAACC,GAAG,CAAC,iEAAiE,CACjF,CACA,GAAI,CAACH,CAAI,CAACC,cAAc,CAAC,MAAM,CAAC,CAAE,CAE9BD,CAAI,CAACI,IAAI,CAAG,MAChB,CACAN,CAAY,CAACO,eAAe,CAACL,CAAI,CACrC,CAAC,CAODM,QAAQ,CAAE,SAAAA,SAASN,CAAI,CAAE,CAErB,GAAIA,CAAI,CAACC,cAAc,CAAC,SAAS,CAAC,CAAE,CAChCM,cAAc,CAACC,OAAO,CAAC,qBAAqB,CAAER,CAAI,CAACS,OAAO,CAAC,CAC3DF,cAAc,CAACC,OAAO,CAAC,iBAAiB,CAAER,CAAI,CAACU,GAAG,CACtD,CAAC,IAAM,CACHR,OAAO,CAACC,GAAG,CAAC,kGAAkG,CAClH,CACJ,CAAC,CAMDQ,OAAO,CAAE,SAAAA,QAAA,CAAW,CAEhB,GAAIJ,cAAc,CAACK,OAAO,CAAC,iBAAiB,CAAC,CAAE,CAC3C,IAAI,CAACb,QAAQ,CAAC,CACVc,OAAO,CAAEN,cAAc,CAACK,OAAO,CAAC,iBAAiB,CAAC,CAClDR,IAAI,CAAEG,cAAc,CAACK,OAAO,CAAC,qBAAqB,CACtD,CAAC,CAAC,CAEFL,cAAc,CAACO,UAAU,CAAC,iBAAiB,CAAC,CAC5CP,cAAc,CAACO,UAAU,CAAC,qBAAqB,CACnD,CACJ,CACJ,CACJ,CAAC,CAAC"}