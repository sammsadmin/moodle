{"version":3,"sources":["../src/eula_response.js"],"names":["define","$","str","eulaResponse","document","ready","length","prop","on","ajax","type","url","M","cfg","wwwroot","dataType","data","action","sesskey","success","get_string","done","text","hide","html","fadeIn"],"mappings":"AA4BAA,OAAM,wCAAC,CAAC,QAAD,CAAW,UAAX,CAAD,CAAyB,SAASC,CAAT,CAAYC,CAAZ,CAAiB,CAC5C,MAAO,CACHC,YAAY,CAAE,uBAAW,CACrBF,CAAC,CAACG,QAAD,CAAD,CAAYC,KAAZ,CAAkB,UAAW,CACzB,GAAIJ,CAAC,CAAC,4BAAD,CAAD,CAAgCK,MAApC,CAA4C,CACxCL,CAAC,CAAC,0BAAD,CAAD,CAA8BM,IAA9B,CAAmC,UAAnC,CAA+C,UAA/C,CACH,CACJ,CAJD,EAMAN,CAAC,CAACG,QAAD,CAAD,CAAYI,EAAZ,CAAe,OAAf,CAAwB,0BAAxB,CAAoD,UAAW,CAC3DP,CAAC,CAAC,0BAAD,CAAD,CAA8BM,IAA9B,CAAmC,UAAnC,CAA+C,EAA/C,EAGAN,CAAC,CAACQ,IAAF,CAAO,CACHC,IAAI,CAAE,MADH,CAEHC,GAAG,CAAEC,CAAC,CAACC,GAAF,CAAMC,OAAN,CAAgB,gDAFlB,CAGHC,QAAQ,CAAE,MAHP,CAIHC,IAAI,CAAE,CAACC,MAAM,CAAE,aAAT,CAAwBC,OAAO,CAAEN,CAAC,CAACC,GAAF,CAAMK,OAAvC,CAJH,CAKHC,OAAO,CAAE,kBAAW,CAChBjB,CAAG,CAACkB,UAAJ,CAAe,cAAf,CAA+B,wBAA/B,EAAyDC,IAAzD,CAA8D,SAASC,CAAT,CAAe,CACzErB,CAAC,CAAC,4BAAD,CAAD,CAAgCsB,IAAhC,GAAuCC,IAAvC,CAA4CF,CAA5C,EAAkDG,MAAlD,GAEAvB,CAAG,CAACkB,UAAJ,CAAe,gCAAf,CAAiD,wBAAjD,EAA2EC,IAA3E,CAAgF,SAASC,CAAT,CAAe,CAC3FrB,CAAC,CAAC,kBAAD,CAAD,CAAsBuB,IAAtB,CAA2BF,CAA3B,CACH,CAFD,CAGH,CAND,CAOH,CAbE,CAAP,CAeH,CAnBD,EAqBArB,CAAC,CAACG,QAAD,CAAD,CAAYI,EAAZ,CAAe,OAAf,CAAwB,2BAAxB,CAAqD,UAAW,CAC5DN,CAAG,CAACkB,UAAJ,CAAe,cAAf,CAA+B,wBAA/B,EAAyDC,IAAzD,CAA8D,SAASC,CAAT,CAAe,CACzErB,CAAC,CAAC,4BAAD,CAAD,CAAgCsB,IAAhC,GAAuCC,IAAvC,CAA4CF,CAA5C,EAAkDG,MAAlD,EACH,CAFD,EAIAxB,CAAC,CAAC,0BAAD,CAAD,CAA8BM,IAA9B,CAAmC,UAAnC,CAA+C,EAA/C,CACH,CAND,CAOH,CApCE,CAsCV,CAvCK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript controller for handling the EULA response.\n *\n * @package   plagiarism_turnitinsim\n * @copyright 2018 Turnitin\n * @author    John McGettrick <jmcgettrick@turnitin.com>\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module plagiarism_turnitinsim/handleEulaResponse\n */\n\ndefine(['jquery', 'core/str'], function($, str) {\n    return {\n        eulaResponse: function() {\n            $(document).ready(function() {\n                if ($(\"#turnitinsim_eulacontainer\").length) {\n                    $('input[name=submitbutton]').prop('disabled', 'disabled');\n                }\n            });\n\n            $(document).on('click', '#turnitinsim_eula_accept', function() {\n                $('input[name=submitbutton]').prop('disabled', '');\n\n                // Hide the EULA link.\n                $.ajax({\n                    type: \"POST\",\n                    url: M.cfg.wwwroot + \"/plagiarism/turnitinsim/ajax/eula_response.php\",\n                    dataType: \"text\",\n                    data: {action: \"accept_eula\", sesskey: M.cfg.sesskey},\n                    success: function() {\n                        str.get_string('eulaaccepted', 'plagiarism_turnitinsim').done(function(text) {\n                            $('.turnitinsim_eulacontainer').hide().html(text).fadeIn();\n\n                            str.get_string('submissiondisplaystatus:queued', 'plagiarism_turnitinsim').done(function(text) {\n                                $('.tii_status_text').html(text);\n                            });\n                        });\n                    }\n                });\n            });\n\n            $(document).on('click', '#turnitinsim_eula_decline', function() {\n                str.get_string('euladeclined', 'plagiarism_turnitinsim').done(function(text) {\n                    $('.turnitinsim_eulacontainer').hide().html(text).fadeIn();\n                });\n\n                $('input[name=submitbutton]').prop('disabled', '');\n            });\n        }\n    };\n});"],"file":"eula_response.min.js"}